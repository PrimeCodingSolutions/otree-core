{% extends "global/Base.html" %}
{% load otree %}
{% block content %}
    <style>
        body {
            background: #41739D;
        }

        ._otree-content {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #timer {
            display: flex;
            justify-content: center;
        }
    </style>

    <div class="daytrader-game-container">
        <p class="daytrader-round-info">
            Nu kan du starte med at handle.
        </p>
        <p class="daytrader-round-info">
            Du kan kun trykke på et af tradernes ansigter og få vist deres private information. Denne information er
            usynlig for andre traders.
        </p>
        <p class="daytrader-round-info">
            Du ved dog, at de to første tradere også fik lov at se et ansigt inden de lavede deres handel. Og du kan se
            hvor meget de gik short eller long i tabellen her:
        </p>
        <p class="daytrader-round-info">
            (Minus er <i class="short-modal-link">short</i>, plus er <i class="long-modal-link">long</i>)
        </p>

        <table class="table daytrader-table">
            <tr class="table-corners">
                <th class="daytrader-table-header border-corner-left">trader</th>
                <th class="daytrader-table-header">pris</th>
                <th class="daytrader-table-header">ansigt</th>
                <th class="daytrader-table-header border-corner-right">handel</th>
            </tr>
            <tr class="daytrader-table-row">
                <td class="daytrader-table-data"> {{ 1 }}.</td>
                <td class="daytrader-table-data"> {{ 50|c }}</td>
                <td class="daytrader-table-data d-flex justify-content-md-center">
                    <img src="{% static 'daytrader/media/unknown_face_daytrader.png' %}" alt="unknown face"
                         class="reveal-face" id="unknownFace1">
                    <img src="{% static 'daytrader/media/happy_face_daytrader.png' %}" alt="happy-face" class="company-face" id="introFace1">
                </td>
                <td class="daytrader-table-data"> +23 aktier</td>
            </tr>
            <tr class="daytrader-table-row">
                <td class="daytrader-table-data"> {{ 2 }}.</td>
                <td class="daytrader-table-data"> {{ 50.06|c }}</td>
                <td class="daytrader-table-data d-flex justify-content-md-center">
                    <img src="{% static 'daytrader/media/unknown_face_daytrader.png' %}" alt="unknown face"
                         class="reveal-face" id="unknownFace2">
                    <img src="{% static 'daytrader/media/happy_face_daytrader.png' %}" alt="happy face" class="company-face" id="introFace2">
                </td>
                <td class="daytrader-table-data"> +45 aktier</td>
            </tr>
        </table>
        <p class="daytrader-round-info">
            Du er trader nummer 3, og du skal handle aktier i firmaet.
            Du kigger i sækken, og ser et
            ansigt der er ked af det. Du har {{ player.wallet|c }}
            og aktieprisen er lige nu {{ player.price|c }}. Hvad vil du gøre?
        </p>
        <p class="daytrader-round-info">
            Nuvel, den første trader må have set et gladt ansigt. Ellers ville
            han/hun ikke være gået long.
            (Tradernes private information er usynlig for andre.)
        </p>
        <p class="daytrader-round-info">
            Den anden sælger må også have set et glad ansigt. Hvis hun/han havde set et
            ked af det ansigt, ville han/hun nok have stolet mere på sin egen private
            information end den første traders private information. Man kan også se, at den
            anden trader har købt flere aktier end den første. Det tyder på at han/hun
            er blevet mere sikker i sin tro på at firmaet er i god stand.
        </p>
        <p class="daytrader-round-info">
            Din private information er et ked af det ansigt. Da du ved, at de to
            første tradere fandt glade ansigter, er din samlede information om firmaets
            tilstand = 2 glade og 1 ked af det ansigt. Det ville derfor være mest
            fornuftigt at satse på, at fimaet er i god stand! Du burde altså gå long.

        <div class="daytrader-next-btn-container">
            <button class="daytrader-next-btn">
                Fortsæt...
            </button>
        </div>
        <div id="shortModal" class="short-modal">
            <div class="short-modal-content">
                <p class="daytrader-round-info">Når man går short betyder bla bla bla</p>
            </div>
        </div>
        <div id="longModal" class="long-modal">
            <div class="long-modal-content">
                <p class="daytrader-round-info">Når går long betyder bla bla bla</p>
            </div>
        </div>
    </div>

    <script>
        let shortModal = document.getElementById("shortModal");
        let longModal = document.getElementById("longModal");
        let shortLink = document.querySelector(".short-modal-link");
        let longLink = document.querySelector(".long-modal-link");
        let introFace1 = document.getElementById("introFace1");
        let introFace2 = document.getElementById("introFace2");
        let unknownFace1 = document.getElementById("unknownFace1");
        let unknownFace2 = document.getElementById("unknownFace2");

        introFace1.style.display = "none"
        introFace2.style.display = "none"

        unknownFace1.onclick = () => {
            unknownFace1.style.display = "none";
            unknownFace2.style.display = "none";
            introFace1.style.display = "block";
        }

        unknownFace2.onclick = () => {
            unknownFace1.style.display = "none";
            unknownFace2.style.display = "none";
            introFace2.style.display = "block";
        }


        shortLink.onclick = function () {
            shortModal.style.display = "block";
        }

        longLink.onclick = function () {
            longModal.style.display = "block";
        }

        window.onclick = function (event) {
            if (event.target === shortModal) {
                shortModal.style.display = "none";
            } else if(event.target === longModal) {
                longModal.style.display = "none";
            }
        }


    </script>
{% endblock %}
